<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2084</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- ========== PANTALLA DE INICIO ========== -->
    <div id="start-screen" class="screen active">
        <div class="glitch-container">
            <h1 class="glitch-title" data-text="2084">2084</h1>
            <p class="subtitle">La Resistencia de las Palabras</p>
        </div>
        <div class="menu-buttons">
            <button class="menu-btn" onclick="startNewGame()">
                <span class="btn-icon">▶</span> Nuevo Juego
            </button>
            <button class="menu-btn" onclick="continueGame()">
                <span class="btn-icon">↻</span> Continuar
            </button>
            <button class="menu-btn" onclick="showCredits()">
                <span class="btn-icon">ℹ</span> Créditos
            </button>
        </div>
    </div>

    <!-- ========== CONTENEDOR DEL JUEGO ========== -->
    <div id="game-container" class="game-container">
        <!-- Canvas principal -->
        <canvas id="game-canvas"></canvas>

        <!-- Indicador de interacción -->
        <div id="interaction-indicator" class="interaction-indicator">
            Presiona ESPACIO o E para interactuar
        </div>

        <!-- Panel lateral derecho -->
        <div class="side-panel">
            <div class="panel-section">
                <h3 class="panel-title">LIBERTAD MENTAL</h3>
                <div class="progress-bar">
                    <div id="mental-freedom-fill" class="progress-fill"></div>
                    <span id="mental-freedom-value" class="progress-value">50</span>
                </div>
            </div>

            <div class="panel-section">
                <h3 class="panel-title">PALABRAS DESBLOQUEADAS</h3>
                <div class="words-counter">
                    <span id="words-count">0</span> palabras
                </div>
                <ul id="words-list" class="words-list">
                    <li class="empty-state">No has desbloqueado palabras</li>
                </ul>
            </div>

            <div class="panel-section">
                <h3 class="panel-title">MISIÓN ACTUAL</h3>
                <p id="current-mission-name" class="mission-name">Explora el colegio</p>
                <button id="show-missions-btn" class="panel-btn">Ver Misiones</button>
            </div>

            <div class="panel-section">
                <canvas id="minimap"></canvas>
            </div>
        </div>

        <!-- Controles táctiles -->
        <div class="touch-controls">
            <div class="dpad">
                <button id="btn-up" class="dpad-btn dpad-up">▲</button>
                <button id="btn-down" class="dpad-btn dpad-down">▼</button>
                <button id="btn-left" class="dpad-btn dpad-left">◀</button>
                <button id="btn-right" class="dpad-btn dpad-right">▶</button>
            </div>
            <div class="action-buttons">
                <button id="btn-interact" class="action-btn">INTERACTUAR</button>
                <button id="btn-missions" class="action-btn">MISIONES</button>
                <button id="btn-pause" class="action-btn">PAUSA</button>
            </div>
        </div>
    </div>

    <!-- ========== OVERLAY DE CINEMÁTICAS (IMÁGENES / VIDEOS) ========== -->
    <div id="cinematic-overlay" class="overlay">
        <div class="cinematic-box">
            <div class="cinematic-header">
                <h3 id="cinematic-title" class="cinematic-title">2084</h3>
                <button id="close-cinematic-btn" class="close-btn">×</button>
            </div>
            <div class="cinematic-content">
                <div class="cinematic-media-container">
                    <img id="cinematic-image" class="cinematic-media" style="display:none;" />
                    <video id="cinematic-video" class="cinematic-media" style="display:none;" playsinline></video>
                </div>
                <p id="cinematic-text" class="cinematic-text"></p>
            </div>
        </div>
    </div>

    <!-- ========== CONTENEDOR DE NOTIFICACIONES ========== -->
    <div id="notification-container" class="notification-container"></div>

    <!-- ========== OVERLAY DE DIÁLOGO ========== -->
    <div id="dialogue-overlay" class="overlay">
        <div class="dialogue-box">
            <div class="dialogue-header">
                <h3 id="npc-name" class="npc-name">NPC</h3>
                <button id="close-dialogue-btn" class="close-btn">×</button>
            </div>
            <div class="dialogue-content">
                <p id="dialogue-text" class="dialogue-text"></p>
                <div id="dialogue-choices" class="dialogue-choices"></div>
            </div>
        </div>
    </div>

    <!-- ========== OVERLAY DE MISIÓN ========== -->
    <div id="mission-overlay" class="overlay">
        <div class="missions-container">
            <div class="missions-header">
                <h2 class="missions-title">NUEVA MISIÓN</h2>
            </div>
            <div class="mission-details">
                <h3 id="mission-title" class="mission-detail-title">Título de la Misión</h3>
                <p id="mission-description" class="mission-description">Descripción de la misión</p>
                
                <div class="mission-section">
                    <h4 class="mission-section-title">Objetivos:</h4>
                    <ul id="mission-objectives-list" class="mission-objectives"></ul>
                </div>
                
                <div class="mission-section">
                    <h4 class="mission-section-title">Recompensas:</h4>
                    <p id="mission-rewards-text" class="mission-rewards"></p>
                </div>
                
                <div class="mission-actions">
                    <button id="accept-mission-btn" class="mission-btn accept-btn">Aceptar Misión</button>
                    <button id="decline-mission-btn" class="mission-btn decline-btn">Rechazar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== OVERLAY DE PANEL DE MISIONES ========== -->
    <div id="missions-overlay" class="overlay">
        <div class="missions-container">
            <div class="missions-header">
                <h2 class="missions-title">MISIONES</h2>
                <button id="close-missions-btn" class="close-btn">×</button>
            </div>
            <div class="missions-content">
                <div class="missions-section">
                    <h3 class="missions-section-title">Misiones Activas</h3>
                    <ul id="active-missions-list" class="missions-list">
                        <li class="empty-state">No tienes misiones activas</li>
                    </ul>
                </div>
                <div class="missions-section">
                    <h3 class="missions-section-title">Misiones Completadas</h3>
                    <ul id="completed-missions-list" class="missions-list">
                        <li class="empty-state">No has completado misiones</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== OVERLAY DE PAUSA ========== -->
    <div id="pause-overlay" class="overlay">
        <div class="pause-container">
            <h2 class="pause-title">JUEGO PAUSADO</h2>
            <div class="pause-buttons">
                <button id="resume-btn" class="pause-btn">Reanudar</button>
                <button id="save-btn" class="pause-btn">Guardar Partida</button>
                <button id="load-btn" class="pause-btn">Cargar Partida</button>
                <button id="restart-btn" class="pause-btn">Reiniciar</button>
                <button id="exit-btn" class="pause-btn">Salir al Menú</button>
            </div>
        </div>
    </div>

    <script src="game.js"></script>
    <script>
        function startNewGame() {
            document.getElementById('start-screen').classList.remove('active');
            document.getElementById('game-container').style.display = 'flex';
            initGame();
        }

        function continueGame() {
            const saveData = localStorage.getItem('2084_save');
            if (saveData) {
                document.getElementById('start-screen').classList.remove('active');
                document.getElementById('game-container').style.display = 'flex';
                initGame();
                setTimeout(() => loadGame(), 100);
            } else {
                alert('No hay partida guardada');
            }
        }

        function showCredits() {
            alert('2084 - La Resistencia de las Palabras\n\nInspírado en 1984 de George Orwell\nDesarrollado con IA\n\n"La libertad es poder decir que dos más dos son cuatro."');
        }
    </script>
</body>
</html>